!function(){"use strict";var t={d:function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{EventEmitter:function(){return r},LogEvent:function(){return n},LogEventGuard:function(){return i},LogEventSerializer:function(){return u},LogEventTransport:function(){return l},LogLevel:function(){return s},Logger:function(){return c},consoleOutput:function(){return m},getDefaultTransport:function(){return p},interceptorOutput:function(){return L},log:function(){return g},serializerOutput:function(){return d}});class r{constructor(){this.mListeners=[]}get listenerCount(){return this.mListeners.length}emit(t){for(const e of this.mListeners)e(t);return this}hasListener(t){return this.mListeners.indexOf(t)>=0}addListener(t){return"function"!=typeof t||this.hasListener(t)||this.mListeners.push(t),this}removeListener(t){const e=this.mListeners.indexOf(t);return e>=0&&this.mListeners.splice(e,1),this}removeAllListeners(){for(;this.mListeners.length>0;)this.mListeners.pop();return this}}class n{constructor(t,e,r,n=void 0,i=Date.now()){this.level=t,this.tag=e,this.message=r,this.params=n,this.timestamp=i}}class i{constructor(){this.test=i.FILTER_ACCEPT_ALL}enable(){return this.test=i.FILTER_ACCEPT_ALL,this}disable(){return this.test=i.FILTER_BLOCK_ALL,this}setCustomFilter(t){return this.test=t,this}setEnabled(t){return t?this.enable():this.disable(),this}}i.FILTER_ACCEPT_ALL=t=>!!t,i.FILTER_BLOCK_ALL=()=>!1;const s=Object.freeze({VERBOSE:0,TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,FATAL:6}),o={levelNameMap:{[s.VERBOSE]:"VERBOSE",[s.TRACE]:"TRACE",[s.DEBUG]:"DEBUG",[s.INFO]:"INFO",[s.WARN]:"WARN",[s.ERROR]:"ERROR",[s.FATAL]:"FATAL"},paramsSeperator:" :: ",maxParamStringLength:250,levelNameFixedLength:0,propertyFormatters:{timestamp:function(t){return new Date(t).toJSON()},level:function(t,e){return(e.config.levelNameMap[t]||`L-${t}`).padEnd(e.config.levelNameFixedLength," ")},params:function(t,e){return e.serializeParamList(t)}},includeTimestamp:!0,includeLevel:!0,includeTag:!0,includeParams:!0};function a(t,e){const r=Object.assign(Object.assign({},t.levelNameMap),e.levelNameMap||{}),n=Object.assign(Object.assign({},t.propertyFormatters),e.propertyFormatters||{});return Object.assign(Object.assign(Object.assign({},t),e),{levelNameMap:r,propertyFormatters:n})}class u{constructor(t={}){this.config=a(o,t),this.format=function(t){if("string"==typeof t.format&&t.format.length>0)return t.format;let e="{message}";return t.includeTag&&(e=`[{tag}] ${e}`),t.includeLevel&&(e=`[{level}] ${e}`),t.includeTimestamp&&(e=`{timestamp} ${e}`),t.includeParams&&(e+="{params}"),e}(this.config)}static parseDelegateFrom(t){if("function"==typeof t.serializeEvent)return t.serializeEvent;const e=t.serializer||new u(t.serializerConfig);return t=>e.serialize(t)}extend(t={}){return new u(a(this.config,t))}serialize(t){return t?this.format.replace(/\{(\w+)\}/g,((e,r)=>{const n=this.config.propertyFormatters[r],i=t[r];return"function"==typeof n?n(i,this):r in t?String(i):e})):""}serializeParamList(t){if(!Array.isArray(t)||t.length<=0)return"";let e="";for(const r of t)e+=this.config.paramsSeperator+this.serializeParam(r);return e}serializeParam(t){let e;try{e=JSON.stringify(t)}catch(r){e=t+""}const r=this.config.maxParamStringLength;return e.length-3>r?e.substring(0,r-3)+"...":e}}class c extends i{constructor(t,e){super(),this.tag=t,this.interceptor=e}verbose(t,...e){this.emit(s.VERBOSE,t,e)}trace(t,...e){this.emit(s.TRACE,t,e)}debug(t,...e){this.emit(s.DEBUG,t,e)}log(t,...e){this.emit(s.DEBUG,t,e)}info(t,...e){this.emit(s.INFO,t,e)}warn(t,...e){this.emit(s.WARN,t,e)}error(t,...e){this.emit(s.ERROR,t,e)}fatal(t,...e){this.emit(s.FATAL,t,e)}emit(t,e,r,n){const i=this.interceptor.createEvent(t,this.tag,e,r,n);this.test(i)&&this.interceptor.interceptEvent(i)}}class l extends i{constructor(t={}){super(),this.events=new r,this.forwardRef=this.interceptEvent.bind(this),this.configure(t)}getLogger(t){return new c(t,this)}interceptEvent(t){this.test(t)&&this.events.emit(t)}createEvent(t,e,r,i,s){return new n(t,e,r,i,s)}configure(t){var e;this.events.removeAllListeners();const r=t.inputs,n=t.outputs;if("function"==typeof t.filter&&this.setCustomFilter(t.filter),Array.isArray(n))for(const t of n)"function"==typeof t&&this.events.addListener(t);if(Array.isArray(r))for(const t of r)"function"==typeof t?t(this.forwardRef):"object"==typeof t&&"function"==typeof(null===(e=null==t?void 0:t.events)||void 0===e?void 0:e.addListener)&&t.events.addListener(this.forwardRef)}}function f(t,e,r,n){e>=s.ERROR?t.error(r,...n):e>=s.WARN?t.warn(r,...n):t.log(r,...n)}function m(t={}){const e=t.target||console,r=t.invoke||f,n=u.parseDelegateFrom(t);return t=>{const{level:i,params:s}=t,o=Array.isArray(s)?s:[],a=n(t);r(e,i,a,o)}}let h;function p(){return h||(h=new l({outputs:[m({serializerConfig:{includeTimestamp:!1,includeLevel:!1,includeParams:!1}})]}))}function g(t){return p().getLogger(t)}function L(t){return t.forwardRef}function d(t){const e="string"==typeof t.seperator?t.seperator:"\n",r=u.parseDelegateFrom(t),n=t.onNextLine;return t=>{n(r(t)+e)}}module.exports=e}();