!function(){"use strict";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{EventEmitter:function(){return r},LogEvent:function(){return n},LogEventGuard:function(){return i},LogEventSerializer:function(){return u},LogEventTransport:function(){return l},LogLevel:function(){return s},Logger:function(){return c},consoleOutput:function(){return m},getDefaultTransport:function(){return p},interceptorOutput:function(){return L},log:function(){return g},serializerOutput:function(){return d}});class r{constructor(){this.mListeners=[]}get listenerCount(){return this.mListeners.length}emit(e){for(const t of this.mListeners)t(e);return this}hasListener(e){return this.mListeners.indexOf(e)>=0}addListener(e){return"function"!=typeof e||this.hasListener(e)||this.mListeners.push(e),this}removeListener(e){const t=this.mListeners.indexOf(e);return t>=0&&this.mListeners.splice(t,1),this}removeAllListeners(){for(;this.mListeners.length>0;)this.mListeners.pop();return this}}class n{constructor(e,t,r,n=void 0,i=Date.now()){this.level=e,this.tag=t,this.message=r,this.params=n,this.timestamp=i}}class i{constructor(){this.test=i.FILTER_ACCEPT_ALL}enable(){return this.test=i.FILTER_ACCEPT_ALL,this}disable(){return this.test=i.FILTER_BLOCK_ALL,this}setCustomFilter(e){return this.test=e,this}setEnabled(e){return e?this.enable():this.disable(),this}}i.FILTER_ACCEPT_ALL=e=>!!e,i.FILTER_BLOCK_ALL=()=>!1;const s=Object.freeze({VERBOSE:0,TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,FATAL:6}),o={levelNameMap:{[s.VERBOSE]:"VERBOSE",[s.TRACE]:"TRACE",[s.DEBUG]:"DEBUG",[s.INFO]:"INFO",[s.WARN]:"WARN",[s.ERROR]:"ERROR",[s.FATAL]:"FATAL"},paramsSeperator:" :: ",maxParamStringLength:250,levelNameFixedLength:0,propertyFormatters:{timestamp:function(e){return new Date(e).toJSON()},level:function(e,t){return(t.config.levelNameMap[e]||`L-${e}`).padEnd(t.config.levelNameFixedLength," ")},params:function(e,t){return t.serializeParamList(e)}},includeTimestamp:!0,includeLevel:!0,includeTag:!0,includeParams:!0};function a(e,t){const r=Object.assign(Object.assign({},e.levelNameMap),t.levelNameMap||{}),n=Object.assign(Object.assign({},e.propertyFormatters),t.propertyFormatters||{});return Object.assign(Object.assign(Object.assign({},e),t),{levelNameMap:r,propertyFormatters:n})}class u{constructor(e={}){this.config=a(o,e),this.format=function(e){if("string"==typeof e.format&&e.format.length>0)return e.format;let t="{message}";return e.includeTag&&(t=`[{tag}] ${t}`),e.includeLevel&&(t=`[{level}] ${t}`),e.includeTimestamp&&(t=`{timestamp} ${t}`),e.includeParams&&(t+="{params}"),t}(this.config)}static parseDelegateFrom(e){if("function"==typeof e.serializeEvent)return e.serializeEvent;const t=e.serializer||new u(e.serializerConfig);return e=>t.serialize(e)}extend(e={}){return new u(a(this.config,e))}serialize(e){return e?this.format.replace(/\{(\w+)\}/g,((t,r)=>{const n=this.config.propertyFormatters[r],i=e[r];return"function"==typeof n?n(i,this):r in e?String(i):t})):""}serializeParamList(e){if(!Array.isArray(e)||e.length<=0)return"";let t="";for(const r of e)t+=this.config.paramsSeperator+this.serializeParam(r);return t}serializeParam(e){let t;try{t=JSON.stringify(e)}catch(r){t=e+""}const r=this.config.maxParamStringLength;return t.length-3>r?t.substring(0,r-3)+"...":t}}class c extends i{constructor(e,t){super(),this.tag=e,this.interceptor=t}verbose(e,...t){this.emit(s.VERBOSE,e,t)}trace(e,...t){this.emit(s.TRACE,e,t)}debug(e,...t){this.emit(s.DEBUG,e,t)}log(e,...t){this.emit(s.DEBUG,e,t)}info(e,...t){this.emit(s.INFO,e,t)}warn(e,...t){this.emit(s.WARN,e,t)}error(e,...t){this.emit(s.ERROR,e,t)}fatal(e,...t){this.emit(s.FATAL,e,t)}emit(e,t,r,n){const i=this.interceptor.createEvent(e,this.tag,t,r,n);this.test(i)&&this.interceptor.interceptEvent(i)}}class l extends i{constructor(e={}){super(),this.events=new r,this.forwardRef=this.interceptEvent.bind(this),this.configure(e)}getLogger(e){return new c(e,this)}interceptEvent(e){this.test(e)&&this.events.emit(e)}createEvent(e,t,r,i,s){return new n(e,t,r,i,s)}addInterceptor(e){this.events.addListener(e.forwardRef)}removeInterceptor(e){this.events.removeListener(e.forwardRef)}configure(e){this.events.removeAllListeners();const t=e.inputs,r=e.outputs;if("function"==typeof e.filter&&this.setCustomFilter(e.filter),Array.isArray(r))for(const e of r)"function"==typeof e&&this.events.addListener(e);if(Array.isArray(t))for(const e of t)"object"==typeof e&&null!==e&&"function"==typeof e.addInterceptor&&e.addInterceptor(this)}}function f(e,t,r,n){t>=s.ERROR?e.error(r,...n):t>=s.WARN?e.warn(r,...n):e.log(r,...n)}function m(e={}){const t=e.target||console,r=e.invoke||f,n=u.parseDelegateFrom(e);return e=>{const{level:i,params:s}=e,o=Array.isArray(s)?s:[],a=n(e);r(t,i,a,o)}}let h;function p(){return h||(h=new l({outputs:[m({serializerConfig:{includeTimestamp:!1,includeLevel:!1,includeParams:!1}})]}))}function g(e){return p().getLogger(e)}function L(e){return e.forwardRef}function d(e){const t="string"==typeof e.seperator?e.seperator:"\n",r=u.parseDelegateFrom(e),n=e.onNextLine;return e=>{n(r(e)+t)}}module.exports=t}();