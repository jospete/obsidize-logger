!function(){"use strict";var t={d:function(e,r){for(var i in r)t.o(r,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:r[i]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{EventEmitter:function(){return r},LogEvent:function(){return i},LogEventGuard:function(){return s},LogEventSerializer:function(){return a},LogEventTransport:function(){return f},LogLevel:function(){return n},Logger:function(){return m},consoleOutlet:function(){return c},interceptorOutlet:function(){return l},serializerOutlet:function(){return h}});class r{constructor(){this.mListeners=[]}get listenerCount(){return this.mListeners.length}emit(t){for(const e of this.mListeners)e(t)}hasListener(t){return this.mListeners.indexOf(t)>=0}addListener(t){return"function"!=typeof t||this.hasListener(t)||this.mListeners.push(t),this}removeListener(t){const e=this.mListeners.indexOf(t);return e>=0&&this.mListeners.splice(e,1),this}removeAllListeners(){for(;this.mListeners.length>0;)this.mListeners.pop();return this}}class i{constructor(t,e,r,i=void 0,s=Date.now()){this.level=t,this.tag=e,this.message=r,this.params=i,this.timestamp=s}}class s{constructor(){this.test=s.FILTER_ACCEPT_ALL}enable(){return this.test=s.FILTER_ACCEPT_ALL,this}disable(){return this.test=s.FILTER_BLOCK_ALL,this}setCustomFilter(t){return this.test=t,this}setEnabled(t){return t?this.enable():this.disable(),this}}s.FILTER_ACCEPT_ALL=t=>!!t,s.FILTER_BLOCK_ALL=()=>!1;const n=Object.freeze({VERBOSE:0,TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,FATAL:6}),o={levelNameMap:function(t){const e={};for(const[r,i]of Object.entries(t))e[i]=r;return e}(n),paramsSeperator:" :: ",maxParamStringLength:250,levelNameFixedLength:0,includeTimestamp:!0,includeLevel:!0,includeTag:!0,includeParams:!0};class a{constructor(t={}){this.options=Object.assign(Object.assign({},o),t)}serialize(t){if(!t)return"";const{tag:e,level:r,message:i,timestamp:s}=t,n=new Date(s).toJSON(),o=this.options.levelNameMap[r]||String(r);let a=i;return this.options.includeTag&&(a=`[${e}] ${a}`),this.options.includeLevel&&(a=`[${o.padEnd(this.options.levelNameFixedLength," ")}] ${a}`),this.options.includeTimestamp&&(a=`${n} ${a}`),this.options.includeParams&&(a+=this.serializeParamList(t.params)),a}serializeParamList(t){if(!Array.isArray(t)||t.length<=0)return"";let e="";for(const r of t)e+=this.options.paramsSeperator+this.serializeParam(r);return e}serializeParam(t){let e;try{e=JSON.stringify(t)}catch(r){e=t+""}const r=this.options.maxParamStringLength;return e.length+3>r?e.substring(0,r-3)+"...":e}}function u(t,e,r,i){e>=n.ERROR?t.error(r,...i):e>=n.WARN?t.warn(r,...i):t.log(r,...i)}function c(t={}){const e=t.target||console,r=t.invoke||u,i=t.serializer||new a(t.serializerOptions);return t=>{const{level:s,params:n}=t,o=Array.isArray(n)?n:[],a=i.serialize(t);r(e,s,a,o)}}function l(t){return e=>t.interceptEvent(e)}function h(t){const e=t.seperator||"\n",r=t.serializer||new a(t.serializerOptions),i=t.onNextLine;return t=>{i(r.serialize(t)+e)}}class m extends s{constructor(t,e){super(),this.tag=t,this.interceptor=e}verbose(t,...e){this.emit(n.VERBOSE,t,e)}trace(t,...e){this.emit(n.TRACE,t,e)}debug(t,...e){this.emit(n.DEBUG,t,e)}log(t,...e){this.emit(n.DEBUG,t,e)}info(t,...e){this.emit(n.INFO,t,e)}warn(t,...e){this.emit(n.WARN,t,e)}error(t,...e){this.emit(n.ERROR,t,e)}fatal(t,...e){this.emit(n.FATAL,t,e)}emit(t,e,r,i){const s=this.interceptor.createEvent(t,this.tag,e,r,i);this.test(s)&&this.interceptor.interceptEvent(s)}}class f extends s{constructor(t={}){super(),this.events=new r,this.configure(t)}getLogger(t){return new m(t,this)}interceptEvent(t){this.test(t)&&this.events.emit(t)}createEvent(t,e,r,s,n){return new i(t,e,r,s,n)}configure(t){if(this.events.removeAllListeners(),Array.isArray(t.outlets))for(const e of t.outlets)"function"==typeof e&&this.events.addListener(e);"function"==typeof t.filter&&this.setCustomFilter(t.filter)}}self.ObsidizeLogger=e}();